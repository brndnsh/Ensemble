
/* --- Mobile Polish & Tiny Screens --- */
@media (max-width: 380px) {
    .genre-btn {
        font-size: 0.75rem;
        padding: 0.6rem 0.2rem;
    }

    h1 {
        font-size: 1rem;
    }
}

@media (max-width: 340px) {
    .key-controls {
        grid-template-columns: 32px 1fr 1fr 34px 26px 26px;
        gap: 0.15rem;
    }
    
    .header-btn {
        font-size: 0.75rem;
    }
}

/* Ensure touch targets have adequate spacing on all mobile */
@media (max-width: 900px) {
    input[type="range"] {
        height: 24px; /* Easier to grab on touch */
    }
    
    .panel-header-controls {
        gap: 0.25rem;
    }
}

/* --- Mobile Stack Behavior --- */
@media (max-width: 768px) {
    /* Hide Control Deck and Instrument Modules by default on mobile */
    #section-controls,
    #section-instruments {
        display: none;
    }

    /* Arranger takes full height */
    #section-arranger {
        flex: 1 0 100%;
        height: 100%;
        padding: 0.5rem;
    }
    
    .app-stack-layout {
        height: calc(100vh - 64px); /* Adjust for mobile header height */
    }

    /* Adjust Arranger Panel inside section to fill */
    #panel-arranger {
        height: 100%;
        margin-bottom: 0;
    }
}
